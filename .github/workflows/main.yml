name: BrainAI Industrial PDF Build

on: 
  push:
    paths:
      - 'docs/**'
  workflow_dispatch:

jobs:
  build-pdfs:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install md-to-pdf
        run: npm install -g md-to-pdf

      - name: Create Build Directory
        run: mkdir -p build

      - name: Render Industrial PDFs
        run: |
          # Wir loopen durch alle MDs und wenden das CSS an
          for f in docs/*.md; do
            filename=$(basename "$f" .md)
            echo "Rendering $filename..."
            md-to-pdf "$f" \
              --config-file docs/config.js \
              --output-path "build/${filename}.pdf"
          done

      - name: Archive Production Docs
        uses: actions/upload-artifact@v4
        with:
          name: ProEDC-Manuals-Final
          path: build/*.pdf
